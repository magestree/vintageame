!function(e){window.SelectBoxManager=function(t){var s=[],n=this;e(document).click(function(t){null===e(t.target).parents(".customSelect").get(0)&&n.close()}),this.add=function(e){s.push(e)},this.close=function(){e(s).each(function(){this.close()})}};var t=new SelectBoxManager;window.SelectBox=function(s){var n,c,l,a,o,i=this,d=e.extend(!0,{manager:t,customScrollbar:!0,zIndex:100,changeCallback:function(e){},truncate:function(e){return e},scrollOptions:{}},s),r="focused",u="selected",h="select-open",f="disabled",p="hovered",m=!1,v=!1,g=!0,b="";function x(){var t=e(".customSelect dd");t.off("mouseover"),t.off("mouseout"),t.on("mouseover",function(t){var s=e(t.target);"dd"!=t.target.tagName.toLowerCase()&&(s=s.parents("dd")),s.addClass(p)}),t.on("mouseout",function(t){var s=e(t.target);"dd"!=t.target.tagName.toLowerCase()&&(s=s.parents("dd")),s.removeClass(p)})}function C(e){c.html()!=e&&(c.html(j(e)),d.changeCallback(d.selectbox.val()))}function w(){var t=[];return o.each(function(s,n){var c=e(this),l=c.parents("optgroup"),a="",o="";l.length>0&&0===c.prev().length&&t.push("<dt>"+l.attr("label")+"</dt>"),""!==n.className&&e(n.className.split(" ")).each(function(){o+='<span class="'+this+'"></span>'}),n.selected&&!n.disabled&&(b=o+j(e(n).html()),a=" "+u),n.disabled&&(a+=" "+f),t.push('<dd class="itm-'+s+" "+a+'">'+o+n.innerHTML+"</dd>")}),c&&null!==c.get(0)&&c.html(b),t.join("")}function S(){a.css("height","auto"),d.height&&a.height()>d.height?(a.css("height",d.height),d.customScrollbar?i.scrollpane=a.jScrollPane(e.extend({contentWidth:200},d.scrollOptions)):a.addClass("defaultScrollbar")):a.css({overflow:"hidden"})}function j(e){var t=e.split("</span>"),s=t[t.length-1];return t[t.length-1]="",t.join("</SPAN>")+d.truncate(s)}this.sync=function(){o=d.selectbox.find("option"),a.html(w()),x(),S()},this.disable=function(){g=!1,n.addClass(f),d.selectbox.attr("disabled","disabled")},this.enable=function(){g=!0,n.removeClass(f),d.selectbox.removeAttr("disabled")},this.close=function(){n.removeClass(h),n.css({"z-index":d.zIndex}),v=!1},this.open=function(){S(),d.manager&&d.manager.close(),n.addClass(h),i.scrollpane&&i.scrollpane.data("jsp").scrollToY(n.find(".selected").position().top),n.css({"z-index":d.zIndex+1}),v=!0},this.jumpToIndex=function(e){d.selectbox.get(0).selectedIndex=e,n.find(".selected").removeClass(u),n.find(".itm-"+e).addClass(u),C(n.find(".itm-"+e).html())},this.jumpToValue=function(e){var t=-1;return o.each(function(s){if(this.innerHTML==e)return t=s,!1}),-1!=t&&i.jumpToIndex(t),t},function(){(m=!!navigator.userAgent.match(/iPad|iPhone|Android|IEMobile|BlackBerry/i))&&d.selectbox.addClass("use-default");var s="";void 0!==d.selectbox.attr("id")&&(s='id="select-'+d.selectbox.attr("id")+'"'),d.selectbox.wrap('<div class="customSelect" '+s+" />"),n=d.selectbox.parents(".customSelect"),o=d.selectbox.find("option");var u=['<div class="selectList"><div class="selectListOuterWrap"><div class="selectListInnerWrap"><div class="selectListTop"></div><dl>'];u.push(w()),u.push('</dl><div class="selectListBottom"></div></div></div></div>'),n.append('<div class="selectValueWrap"><div class="selectedValue">'+b+'</div> <span class="caret"></span> </div>'+u.join("")),a=n.find("dl"),c=n.find(".selectedValue"),l=n.find(".selectValueWrap"),n.find(".selectList"),n.width(d.width),a.width(d.width-2),l.click(function(){v?(d.selectbox.focus(),i.close()):g&&(m?d.selectbox.focus():i.open())}),a.click(function(t){var s=e(t.target);(s.is("dd")||s.parents("dd"))&&("dd"!=t.target.tagName.toLowerCase()&&(s=s.parents("dd")),!s.hasClass(f)&&s.get(0)&&(i.jumpToIndex(s.get(0).className.split(" ")[0].split("-")[1]),i.close(),m||d.selectbox.focus()))}),d.selectbox.focus(function(e){!0,n.addClass(r)}).blur(function(e){!1,n.removeClass(r)}),m&&d.selectbox.change(function(t){C(e(this).find("option:selected").html())}),d.selectbox.keyup(function(e){i.close(),o.each(function(e,t){if(t.selected)return i.jumpToIndex(e),!1})}),x(),t.add(i)}()}}(jQuery);